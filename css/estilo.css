:root {
  --bg:#0b0a09;
  --purple:#b24cff;
  --bpm:66;
}

*{box-sizing:border-box;margin:0;padding:0}
html,body{height:100%}
body{
  background:var(--bg);
  display:grid;
  place-items:center;
  color:#1a140c;
  font-family:"Cormorant Garamond",serif;
  -webkit-font-smoothing:antialiased;
}

/* pergaminho */
.pergaminho {
  position:relative;
  width:min(920px,94vw);
  min-height:min(760px,86vh);
  overflow:hidden;
  display:flex;
  flex-direction:column;
  justify-content:center;
  align-items:center;
  border-radius:14px;
  box-shadow:0 30px 80px rgba(0,0,0,.7);
  background:#bca97b no-repeat center/cover;
  filter:saturate(1.05) contrast(1.1) brightness(0.97);
  isolation:isolate;
  transition:filter 1.4s ease;
}
.pergaminho::before{
  content:"";
  position:absolute; inset:0;
  background:
    radial-gradient(ellipse at 50% 45%, rgba(255,230,180,.12), transparent 70%),
    radial-gradient(circle at 50% 60%, rgba(0,0,0,.45), transparent 70%);
  mix-blend-mode:multiply;
  z-index:0;
}
.pergaminho.revealed {
  filter:saturate(1.2) brightness(1.03);
}

/* animação de respiração do papel */
@keyframes parchmentGlow {
  0%,100%{filter:saturate(1.05) brightness(0.96);}
  50%{filter:saturate(1.12) brightness(1.05);}
}
.pergaminho.pulse {
  animation:parchmentGlow calc(60s/var(--bpm)) ease-in-out infinite;
}

/* selo */
.selo-btn{
  position:absolute; top:50%; left:50%;
  transform:translate(-50%,-50%);
  border:0; background:transparent;
  cursor:pointer; z-index:2;
}
.selo-img{
  width:180px; height:180px;
  display:block;
  filter:drop-shadow(0 0 18px rgba(178,76,255,.4));
  transition:transform .3s ease, opacity .8s ease;
}
.selo-btn.hidden{
  opacity:0; pointer-events:none;
  transform:translate(-50%,-50%) scale(.95);
}

/* carta */
.carta{
  position:relative;
  width:84%; max-width:820px;
  min-height:480px;
  padding:28px;
  text-align:justify;
  font-size:18px;
  color:#1a140c;
  line-height:1.65;
  background:rgba(255,255,255,.06);
  border-radius:6px;
  box-shadow:inset 0 1px 0 rgba(255,255,255,.15), inset 0 -2px 12px rgba(0,0,0,.3);
  clip-path:polygon(49.5% 0,50.5% 0,50.5% 100%,49.5% 100%);
  opacity:0;
  transition:clip-path 1.1s cubic-bezier(.2,.7,.2,1), opacity .7s ease;
  z-index:1;
}
.pergaminho.revealed .carta{
  clip-path:inset(0% 0% 0% 0% round 6px);
  opacity:1;
}

/* assinatura */
.rodape{width:84%;max-width:820px;display:flex;justify-content:flex-start;padding:14px 28px;}
.assinatura{
  font-family:"Cinzel Decorative",serif;
  font-weight:700;
  font-size:22px;
  letter-spacing:.02em;
  opacity:0;
  transition:opacity 1.4s ease;
  background:linear-gradient(90deg,var(--purple),#ff8a4c);
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
}
.pergaminho.revealed .assinatura{opacity:1;}

/* runes shuffle */
.runes{display:inline-flex;gap:.02em;white-space:pre;}
.rune{display:inline-block;transform-origin:50% 70%;transition:transform .6s ease,opacity .6s ease;}

.spark{
  position:absolute;width:3px;height:3px;border-radius:50%;
  background:radial-gradient(circle,#ffdca3,rgba(255,255,255,0));
  pointer-events:none;
  animation:sparkRise 1.6s ease-out forwards;
}
@keyframes sparkRise{
  0%{opacity:1;transform:translateY(0) scale(.6)}
  100%{opacity:0;transform:translateY(-80px) scale(1.6)}
}
