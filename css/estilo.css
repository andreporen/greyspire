/* ================================
   VARIÁVEIS
===================================*/
:root{
  --bg:#000;                     /* fundo do site */
  --parchment:#bca97b;           /* base do pergaminho */
  --purple:#b24cff;
  --pulse:#b24cff66;
  --bpm:60;                      /* 60 bpm = 1 pulsação por segundo */
  --text-size:15px;
}

/* ================================
   RESET / BASE
===================================*/
*{box-sizing:border-box;margin:0;padding:0}
html,body{height:100%}
body{
  background:var(--bg);
  display:grid;
  place-items:center;
  color:#0a0a0a;
  font-family:"Uncial Antiqua", serif;
  -webkit-font-smoothing:antialiased;
  overflow:hidden;
}

/* ================================
   PERGAMINHO A4 CENTRALIZADO
===================================*/
.pergaminho{
  position:relative;
  aspect-ratio:1 / 1.414; /* A4 */
  width:min(68vw,720px);
  max-height:88vh;
  background:var(--parchment) url("../img/pergaminho_base.jpg") center/cover no-repeat;
  border-radius:6px;
  box-shadow:
    0 0 30px rgba(0,0,0,.9),
    0 0 90px rgba(0,0,0,.7);
  filter:saturate(1.05) contrast(1.07) brightness(.97);
  display:flex;
  justify-content:center;
  align-items:center;
  overflow:hidden;
  isolation:isolate;
  transition:filter 1.2s ease;
}

/* queimado nas bordas */
.pergaminho::before{
  content:"";
  position:absolute;
  inset:0;
  background:radial-gradient(ellipse at center, transparent 60%, rgba(0,0,0,.6) 100%);
  pointer-events:none;
  mix-blend-mode:multiply;
}

/* efeito pulsação */
@keyframes parchmentPulse{
  0%,100%{ filter:brightness(0.94) }
  50%{ filter:brightness(1.15) saturate(1.22) }
}
.pergaminho.fenda-pulse{
  animation:parchmentPulse calc(60s/var(--bpm)) infinite ease-in-out;
}

/* ================================
   SELO
===================================*/
.selo-btn{
  position:absolute;
  top:50%; left:50%;
  transform:translate(-50%,-50%);
  border:0;
  background:transparent;
  cursor:pointer;
  z-index:3;
  transition:opacity .6s ease, transform .4s ease;
}
.selo-img{
  width:160px;
  height:160px;
  filter:drop-shadow(0 0 22px rgba(178,76,255,.45));
  transition:transform .3s ease;
}
.selo-btn:hover .selo-img{ transform:scale(1.06) }
.selo-btn.hidden{
  opacity:0;
  pointer-events:none;
  transform:translate(-50%,-50%) scale(.88);
}

/* ================================
   CARTA + SCROLL
===================================*/
.carta{
  width:82%;
  height:80%;
  opacity:0;
  transition:opacity 1s ease, filter 1.4s ease;
  filter:blur(10px);
  display:flex;
}
.pergaminho.revealed .carta{
  opacity:1;
  filter:blur(0);
}

.scrollbox{
  width:100%;
  height:100%;
  overflow-y:auto;
  padding:22px 28px;
  scrollbar-width:none;
}
.scrollbox::-webkit-scrollbar{ width:0 }

.conteudo p{
  font-size:var(--text-size);
  line-height:1.6;
  margin:0 0 1rem 0;
  text-shadow:0 0 4px rgba(178,76,255,.15);
}

/* ================================
   ASSINATURA CORROMPIDA
===================================*/
.assinatura-wrap{
  margin-top:28px;
  margin-bottom:8px;
}
.assinatura{
  position:relative;
  font-family:"MedievalSharp", cursive;
  font-size:20px;
  letter-spacing:.05em;
  color:#000;
  opacity:0;
  transform:scale(.96);
  transition:opacity 1.4s ease, transform 1.4s ease;
  text-shadow:
    0 0 5px rgba(178,76,255,.35),
    0 0 15px rgba(178,76,255,.25);
}
.pergaminho.revealed .assinatura{
  opacity:1;
  transform:scale(1);
}

/* glitch ghost layers */
.assinatura::before,
.assinatura::after{
  content:attr(data-text);
  position:absolute;
  inset:0;
  pointer-events:none;
  mix-blend-mode:screen;
}
.assinatura::before{
  color:rgba(255,0,255,.25);
  transform:translate(1px,-1px);
}
.assinatura::after{
  color:rgba(150,0,255,.35);
  transform:translate(-1px,1px);
}

/* pulsação da fenda */
@keyframes corruptPulse{
  0%,100%{ filter:drop-shadow(0 0 6px var(--purple)) }
  50%{ filter:drop-shadow(0 0 24px var(--purple)) }
}
.assinatura.fenda{
  animation:corruptPulse calc(60s/var(--bpm)) infinite ease-in-out;
}

/* ================================
   PARTÍCULAS
===================================*/
.spark{
  position:absolute;
  width:3px;
  height:3px;
  border-radius:50%;
  background:radial-gradient(circle, #ffdca3, rgba(255,255,255,0));
  pointer-events:none;
  animation:sparkRise 1.6s ease-out forwards;
}
@keyframes sparkRise{
  0%{ opacity:1; transform:translateY(0) scale(.5) }
  100%{ opacity:0; transform:translateY(-70px) scale(1.4) }
}

/* ================================
   MOBILE
===================================*/
@media (max-width:600px){
  .pergaminho{ width:90vw; max-height:90vh }
  .conteudo p{ font-size:14px }
  .assinatura{ font-size:18px }
  .selo-img{ width:130px; height:130px }
}
