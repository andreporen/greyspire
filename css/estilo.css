:root{
  --bg:#0b0a09;
  --purple:#b24cff;
  --bpm:60; /* 60 BPM */
}

*{box-sizing:border-box;margin:0;padding:0}
html,body{height:100%}
body{
  background:var(--bg);
  display:grid; place-items:center;
  color:#0a0a0a;
  font-family:"Cormorant Garamond",serif;
  -webkit-font-smoothing:antialiased;
}

/* Pergaminho com textura real */
.pergaminho{
  position:relative;
  width:min(920px,94vw);
  min-height:min(760px,86vh);
  overflow:hidden;
  display:flex; flex-direction:column; justify-content:center; align-items:center;
  border-radius:14px;
  box-shadow:0 30px 80px rgba(0,0,0,.7);
  background:#bca97b no-repeat center/cover;
  filter:saturate(1.05) contrast(1.1) brightness(0.97);
  isolation:isolate;
  transition:filter 1.4s ease;
}
.pergaminho::before{
  content:""; position:absolute; inset:0; z-index:0;
  background:
    radial-gradient(ellipse at 50% 45%, rgba(255,230,180,.12), transparent 70%),
    radial-gradient(circle at 50% 60%, rgba(0,0,0,.45), transparent 70%);
  mix-blend-mode:multiply;
}
.pergaminho.revealed{ filter:saturate(1.12) brightness(1.03); }

/* Respiração do papel sincronizada */
@keyframes parchmentGlow {
  0%,100%{filter:saturate(1.05) brightness(0.96);}
  50%{filter:saturate(1.12) brightness(1.05);}
}
.pergaminho.pulse { animation:parchmentGlow calc(60s/var(--bpm)) ease-in-out infinite; }

/* Canvas do shader (somente atrás da assinatura) */
.fx-canvas{
  position:absolute; inset:0; z-index:1; pointer-events:none;
}

/* Selo */
.selo-btn{
  position:absolute; top:50%; left:50%; transform:translate(-50%,-50%);
  border:0; background:transparent; cursor:pointer; z-index:3;
}
.selo-img{ width:180px; height:180px; display:block;
  filter:drop-shadow(0 0 18px rgba(178,76,255,.4));
  transition:transform .3s ease, opacity .8s ease;
}
.selo-btn.hidden{ opacity:0; pointer-events:none; transform:translate(-50%,-50%) scale(.95); }

/* Carta (fenda abre) */
.carta{
  position:relative; z-index:2;
  width:84%; max-width:820px; min-height:520px;
  padding:28px; border-radius:6px;
  text-align:justify; line-height:1.65; font-size:18px; color:#0a0a0a;
  background:rgba(255,255,255,.06);
  box-shadow:inset 0 1px 0 rgba(255,255,255,.15), inset 0 -2px 12px rgba(0,0,0,.3);
  clip-path:polygon(49.5% 0,50.5% 0,50.5% 100%,49.5% 100%);
  opacity:0;
  transition:clip-path 1.1s cubic-bezier(.2,.7,.2,1), opacity .7s ease;
}
.pergaminho.revealed .carta{
  clip-path:inset(0% 0% 0% 0% round 6px);
  opacity:1;
}

/* Texto corrompido (matrix-like) — base preta + glow roxo */
.conteudo{
  position:relative;
  color:#0a0a0a; /* letras pretas */
  filter:contrast(1.15);
}
.conteudo .corrupt{ /* cada letra */
  display:inline-block;
  font-variant-ligatures:none;
  color:#0a0a0a; /* importante: preto */
  text-shadow:
    0 0 10px rgba(178,76,255,.35),
    0 0 22px rgba(178,76,255,.25),
    0 0 40px rgba(178,76,255,.18);
  will-change:contents, transform;
}

/* Assinatura dentro da carta */
.assinatura-wrap{
  margin-top:22px; display:flex; justify-content:flex-start;
}
.assinatura{
  position:relative;
  font-family:'MedievalSharp', cursive; /* blackletter legível */
  font-size:26px; letter-spacing:.04em;
  color:#0a0a0a; /* PRETO */
  text-shadow:
    0 0 10px rgba(178,76,255,.45),
    0 0 26px rgba(178,76,255,.30),
    0 0 50px rgba(178,76,255,.20);
  opacity:0; transform:scale(.98);
  transition:opacity 1.2s ease, transform 1.2s ease;
}
.pergaminho.revealed .assinatura{ opacity:1; transform:scale(1); }

/* Assinatura duplicada espectral (fenda) */
.assinatura::before, .assinatura::after{
  content:attr(data-text);
  position:absolute; inset:0; pointer-events:none; mix-blend-mode:screen;
}
.assinatura::before{ color:rgba(255,0,255,.28); transform:translate(1px,-1px); }
.assinatura::after { color:rgba(150,0,255,.42); transform:translate(-1px,1px); }

/* Partículas discretas (opcional) */
.spark{
  position:absolute; width:3px; height:3px; border-radius:50%;
  background:radial-gradient(circle, #ffdca3, rgba(255,255,255,0));
  pointer-events:none; animation:sparkRise 1.3s ease-out forwards;
}
@keyframes sparkRise{ 0%{opacity:1; transform:translateY(0) scale(.6)} 100%{opacity:0; transform:translateY(-70px) scale(1.5)} }

.visually-hidden{ position:absolute; left:-9999px; top:auto; width:1px; height:1px; overflow:hidden; }

@media (max-width:560px){
  .carta{ padding:14px; font-size:16px; min-height:64vh }
  .assinatura{ font-size:22px }
  .selo-img{ width:140px; height:140px }
}
