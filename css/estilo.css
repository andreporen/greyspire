:root {
  --bg:#0b0a09;
  --purple:#b24cff;
  --bpm:60; /* 60 bpm como pedido */
}

*{box-sizing:border-box;margin:0;padding:0}
html,body{height:100%}
body{
  background:var(--bg);
  display:grid;
  place-items:center;
  color:#1a140c;
  font-family:"Cormorant Garamond",serif;
  -webkit-font-smoothing:antialiased;
}

/* Pergaminho base com textura real */
.pergaminho {
  position:relative;
  width:min(920px,94vw);
  min-height:min(760px,86vh);
  overflow:hidden;
  display:flex;
  flex-direction:column;
  justify-content:center;
  align-items:center;
  border-radius:14px;
  box-shadow:0 30px 80px rgba(0,0,0,.7);
  background:#bca97b no-repeat center/cover;
  filter:saturate(1.05) contrast(1.1) brightness(0.97);
  isolation:isolate;
  transition:filter 1.4s ease;
}
.pergaminho::before{
  content:"";
  position:absolute; inset:0;
  background:
    radial-gradient(ellipse at 50% 45%, rgba(255,230,180,.12), transparent 70%),
    radial-gradient(circle at 50% 60%, rgba(0,0,0,.45), transparent 70%);
  mix-blend-mode:multiply;
  z-index:0;
}
.pergaminho.revealed { filter:saturate(1.2) brightness(1.03); }

/* respiração do papel, sincronizada */
@keyframes parchmentGlow {
  0%,100%{filter:saturate(1.05) brightness(0.96);}
  50%{filter:saturate(1.12) brightness(1.05);}
}
.pergaminho.pulse { animation:parchmentGlow calc(60s/var(--bpm)) ease-in-out infinite; }

/* Canvas de efeitos WebGL (sobreposição transparente) */
.fx-canvas{
  position:absolute; inset:0; z-index:2; pointer-events:none;
}

/* Selo */
.selo-btn{
  position:absolute; top:50%; left:50%;
  transform:translate(-50%,-50%);
  border:0; background:transparent;
  cursor:pointer; z-index:3;
}
.selo-img{
  width:180px; height:180px; display:block;
  filter:drop-shadow(0 0 18px rgba(178,76,255,.4));
  transition:transform .3s ease, opacity .8s ease;
}
.selo-btn.hidden{
  opacity:0; pointer-events:none; transform:translate(-50%,-50%) scale(.95);
}

/* Carta com fenda */
.carta{
  position:relative; z-index:1;
  width:84%; max-width:820px; min-height:480px;
  padding:28px; text-align:justify;
  font-size:18px; line-height:1.65; color:#1a140c;
  background:rgba(255,255,255,.06);
  border-radius:6px;
  box-shadow:inset 0 1px 0 rgba(255,255,255,.15), inset 0 -2px 12px rgba(0,0,0,.3);
  clip-path:polygon(49.5% 0,50.5% 0,50.5% 100%,49.5% 100%);
  opacity:0;
  transition:clip-path 1.1s cubic-bezier(.2,.7,.2,1), opacity .7s ease;
}
.pergaminho.revealed .carta{
  clip-path:inset(0% 0% 0% 0% round 6px);
  opacity:1;
}

/* Assinatura – Blackletter + corrupção roxa */
.rodape{ width:84%; max-width:820px; display:flex; justify-content:flex-start; padding:14px 28px; z-index:3; }
.assinatura{
  position:relative;
  font-family:'MedievalSharp', cursive; /* blackletter legível */
  font-size:26px; letter-spacing:.04em;
  opacity:0; transform:scale(0.97);
  background:linear-gradient(90deg, rgba(120,0,255,0.8), rgba(255,0,255,0.4));
  -webkit-background-clip:text; -webkit-text-fill-color:transparent;
  filter: blur(1px) contrast(1.2) brightness(1.1);
  text-shadow:0 0 8px rgba(150,0,255,0.5);
  transition:opacity 1.6s ease, transform 1.6s ease;
}
.pergaminho.revealed .assinatura { opacity:1; transform:scale(1); }

/* duplicatas espectrais (fenda) */
.assinatura::before,
.assinatura::after{
  content:attr(data-text);
  position:absolute; inset:0; pointer-events:none; mix-blend-mode:screen;
  filter:blur(2px) brightness(1.2);
}
.assinatura::before{ color:rgba(255,0,255,0.35); transform:translate(2px,-2px); }
.assinatura::after { color:rgba(150,0,255,0.55); transform:translate(-2px, 2px); }

/* pulso roxo a 60 bpm */
@keyframes pulseFenda {
  0%,100%{opacity:.6; filter:hue-rotate(0deg) blur(1px) brightness(1.05); text-shadow:0 0 10px rgba(180,0,255,0.5);}
  50%   {opacity:1; filter:hue-rotate(40deg) blur(2px) brightness(1.3); text-shadow:0 0 30px rgba(255,0,255,0.85);}
}
.assinatura.pulsando{ animation:pulseFenda 1s ease-in-out infinite; }

/* Runas (shuffle) */
.runes{ display:inline-flex; gap:.02em; white-space:pre; }
.rune{ display:inline-block; transform-origin:50% 70%; transition: transform .6s ease, opacity .6s ease; }

/* Partículas rúnicas */
.spark{
  position:absolute; width:3px; height:3px; border-radius:50%;
  background:radial-gradient(circle, #ffdca3, rgba(255,255,255,0));
  pointer-events:none; animation:sparkRise 1.6s ease-out forwards;
}
@keyframes sparkRise{
  0%{opacity:1; transform:translateY(0) scale(.6)}
  100%{opacity:0; transform:translateY(-80px) scale(1.6)}
}

.visually-hidden{ position:absolute; left:-9999px; top:auto; width:1px; height:1px; overflow:hidden; }

@media (max-width:560px){
  .carta{ padding:14px; font-size:16px; min-height:64vh }
  .rodape{ padding:8px 14px }
  .selo-img{ width:140px; height:140px }
}
